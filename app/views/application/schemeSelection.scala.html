@(form: Form[_root_.forms.SelectedSchemesForm.SchemePreferences])(implicit request: Request[_], flash: Flash, user: Option[CachedData], feedbackUrl: String, lang: play.api.i18n.Lang)

@import _root_.forms.SelectedSchemesForm
@import _root_.forms.SelectedSchemesForm.Scheme
@import views.html.widgets.pageProgress
@import views.html.widgets.{checkbox, radioBox}
@import views.html.widgets.schemesCheckboxGroup

@getScheme(id: Int) = @{
    val selectedSchemes = form.value match {
                            case Some(formObject) => formObject.schemes
                            case None => Nil
                          }
    if(id <= selectedSchemes.size) selectedSchemes.apply(id - 1) else ""
}

@main_template(title = "Choose your schemes", pageForms = Seq(form)) {
    @pageProgress(2, 7)

    @helper.form(action = routes.SchemePreferencesController.submit(), 'novalidate -> "novalidate") {
        @helper.CSRF.formField
        <h1 class="heading-xlarge" id="personalDetailsHeading">Choose your schemes</h1>

        <section class="text panel-indent">
            <p>From 1 up to 5 preferences</p>
        </section>

        <section class="grid-wrapper scheme-wrapper">
            <div class="scheme-input-container">
            @schemesCheckboxGroup(form("schemes"), SelectedSchemesForm.AllSchemes,
                '_label -> "",
                '_class -> ""
            )
            </div>
            <div class="scheme-info-container hide-nojs">
                <div id="sticky-anchor" style="height: 0px;"></div>
                <div class="scheme-info-panel">
                    <p class="bold-small" id="chooseYourPrefs">Choose your <span id="chooseNextPreference">1st preference</span>
                        <span class="hidden" data-optionalappended=""><br> (optional)</span></p>
                    <p class="bold-small hidden" id="chosenLimit">You've chosen 5 preferences</p>
                </div>
            </div>
        </section>

        <section id="selectedPreferences" class="hide-nojs">
            <h2 class="heading-large">Your chosen schemes</h2>
            <div data-scheme-placeholder="">
                <div class="scheme-warning text">
                    <p>Your schemes will appear here as you select them from the list</p>
                </div>
            </div>
            <input type="hidden" id="scheme_1" name="scheme_1" value="@getScheme(1)" />
            <input type="hidden" id="scheme_2" name="scheme_2" value="@getScheme(2)" />
            <input type="hidden" id="scheme_3" name="scheme_3" value="@getScheme(3)" />
            <input type="hidden" id="scheme_4" name="scheme_4" value="@getScheme(4)" />
            <input type="hidden" id="scheme_5" name="scheme_5" value="@getScheme(5)" />
            <ol id="selectedPrefList" class="list-text">
                <li></li>
            </ol>
                &nbsp;
        </section>
        <section class="text panel-indent">
            <p>Your schemes will be offered to you in order of preference.</p>
            <p>You will not be able to reorder them after submitting your application.</p>
        </section>
        <section class="text">
            <fieldset>
                <legend class="form-label">Are you happy with the order of your schemes?</legend>
                <div class="form-group no-btm-margin">
                    @radioBox(form("orderAgreed"), options = Seq("true" -> "Yes", "false" -> "No"))
                </div>
            </fieldset>
        </section>
        <section class="text">
            <fieldset>
                <legend class="form-label">Are you eligible for your chosen schemes?</legend>
                <p>Make sure you're <a href="https://www.gov.uk/guidance/civil-service-fast-stream-graduate-schemes" target="_blank" rel="external">
                    eligible</a> for your chosen schemes.</p>
                <div class="form-group no-btm-margin">
                    @radioBox(form("eligible"), options = Seq("true" -> "Yes", "false" -> "No"))
                </div>
            </fieldset>
        </section>
        <section class="text">
            <fieldset>
                <legend class="form-label">Would you consider other schemes?</legend>
                <p>If we don't offer you a place on one of your chosen schemes, we may
                    suggest other schemes on the Fast Stream.</p>
                <div class="form-group no-btm-margin">
                    @radioBox(form("alternatives"), options = Seq("true" -> "Yes", "false" -> "No"))
                </div>
            </fieldset>
        </section>
        <div class="form-group no-btm-margin">
            <button id="schemeSaveBtn" type="submit" value="submit" class="button">Save and continue</button>
        </div>
    }
}
<script src='@routes.Assets.versioned("js/schemeSelection.js")' type="text/javascript"></script>

